(this["webpackJsonpmat-tracker-client"]=this["webpackJsonpmat-tracker-client"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(12),c=n.n(r),s=n(4),m=n.n(s),i=n(7),b=n(3),l=n(6),o=n(2);function d(e){return j.apply(this,arguments)}function j(){return(j=Object(i.a)(m.a.mark((function e(t){var n,a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,e.next=3,fetch("/members");case 3:return a=e.sent,e.next=6,a.json();case 6:if(r=e.sent,""!==n){e.next=9;break}return e.abrupt("return",r);case 9:return c=r.filter((function(e){return null!==e.member_name&&e.member_name.toUpperCase().includes(n.toUpperCase())})),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=n(8),h=n(9),p=n(0);function O(e){var t=e.handleChange,n=e.handleSubmit,r=e.getMembersFunction,c=void 0===r?d:r,s=e.setMembers,o=new Date,j=o.getMonth()+1,O=o.getFullYear()+"-"+j+"-"+o.getDate(),x=Object(a.useState)({member_name:"",member_phone:"",member_belt:"white",member_joined_at:O,member_paid:"No",member_frozen:"No"}),f=Object(b.a)(x,2),v=f[0],_=f[1],N=Object(a.useState)(!1),g=Object(b.a)(N,2),y=g[0],k=g[1];return Object(a.useEffect)((function(){}),[]),void 0===n&&(n=function(e){if(e.preventDefault(),""!==v.member_name)if(""!==v.member_phone)if(isNaN(parseInt(v.member_phone)))alert("please only enter numbers in phone field");else if(v.member_phone.length<10||v.member_phone.length>11)alert("Your phone number is not valid");else try{function e(){return t.apply(this,arguments)}function t(){return(t=Object(i.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v,console.log(v),e.next=4,fetch("/members",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 4:return n=e.sent,e.next=7,c({name:""});case 7:a=e.sent,s(a),console.log(n),v={},k(!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e()}catch(t){console.log(t)}else alert("please enter your phone number");else alert("please enter your name")}),void 0===t&&(t=function(e){var t=e.target.name,n=e.target.value;_((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(u.a)({},t,n))}))}),Object(p.jsxs)("div",{id:"memberInputFormContainer",children:[Object(p.jsxs)("form",{id:"memberInputForm",style:{display:y?"none":"flex"},children:[Object(p.jsxs)("div",{className:"memberInputElement",children:["Name:",Object(p.jsx)("input",{onChange:t,name:"member_name",className:"memberInput","data-testid":"name"})]}),Object(p.jsxs)("div",{className:"memberInputElement",children:["Phone number:",Object(p.jsx)("input",{onChange:t,name:"member_phone",className:"memberInput","data-testid":"phone"})]}),Object(p.jsxs)("div",{className:"memberInputElement",children:["Belt:",Object(p.jsxs)("select",{onChange:t,name:"member_belt","data-testid":"beltInput",className:"memberInput",children:[Object(p.jsx)("option",{value:"white",children:"white"}),Object(p.jsx)("option",{value:"blue",children:"blue"}),Object(p.jsx)("option",{value:"purple",children:"purple"}),Object(p.jsx)("option",{value:"brown",children:"brown"}),Object(p.jsx)("option",{value:"black",children:"black"})]})]}),Object(p.jsxs)("div",{className:"memberInputElement",children:["Joined:",Object(p.jsx)("input",{name:"member_joined_at",className:"memberInput",type:"date","data-testid":"joined",onChange:t,defaultValue:O})]}),Object(p.jsx)("input",{"data-testid":"submit",onClick:n,type:"submit"})]}),Object(p.jsx)(l.b,{id:"createMemberCancel",className:"homeLink",to:"/",children:Object(p.jsx)("button",{"data-testid":"cancel",className:"cancel",children:"Cancel"})}),Object(p.jsxs)("div",{id:"memberAddedNotification",style:{display:y?"flex":"none"},children:[Object(p.jsx)("h3",{id:"memberAddedMessage",children:"Member added! Navigate back to home."}),Object(p.jsx)(l.b,{className:"homeLink",to:"/",children:Object(p.jsx)("button",{className:"buttons cancel home",children:"Home"})})]})]})}function x(e){var t=e.setMembers,n=e.getMembersFunction,r=void 0===n?d:n,c=Object(o.g)(),s=c.id,j=c.name,O=c.phone,x=c.belt,f=c.joined,v=c.paid,_=c.frozen,N=Object(a.useState)(!1),g=Object(b.a)(N,2),y=g[0],k=g[1],C=Object(a.useState)(!1),w=Object(b.a)(C,2),I=w[0],M=w[1],E=Object(a.useState)({member_name:j,member_phone:O,member_belt:x,member_joined_at:f,member_paid:v,member_frozen:_}),S=Object(b.a)(E,2),F=S[0],z=S[1];function P(){return(P=Object(i.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("Are you sure you want to delete this member?")){e.next=16;break}return e.prev=2,e.next=5,fetch("/members/"+s,{method:"DELETE",headers:{"Content-type":"application/json"}});case 5:return e.sent,e.next=8,r({name:""});case 8:n=e.sent,t(n),k(!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function U(e){var t=e.target.name,n=e.target.value;z((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(u.a)({},t,n))}))}function D(){return(D=Object(i.a)(m.a.mark((function e(n){var a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=F,e.prev=2,e.next=5,fetch("/members/"+s,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(a)});case 5:return e.sent,e.next=8,r({name:""});case 8:c=e.sent,t(c),console.log(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:z(a),M(!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}return Object(p.jsxs)("div",{id:"memberPage",children:[Object(p.jsxs)("div",{id:"memberInfoContainer",style:{display:!1===y&&!1===I?"flex":"none"},children:[Object(p.jsxs)("div",{className:"memberInfoElement",children:[Object(p.jsx)("h3",{children:"Name:"})," ",F.member_name]}),Object(p.jsxs)("div",{className:"memberInfoElement",children:[Object(p.jsx)("h3",{children:"Phone number:"})," ",F.member_phone]}),Object(p.jsxs)("div",{className:"memberInfoElement",children:[Object(p.jsx)("h3",{children:"Belt:"})," ",F.member_belt]}),Object(p.jsxs)("div",{className:"memberInfoElement",children:[Object(p.jsx)("h3",{children:"Joined at:"})," ",F.member_joined_at]}),Object(p.jsxs)("div",{className:"memberInfoElement",children:[Object(p.jsx)("h3",{children:"Paid:"})," ",F.member_paid]}),Object(p.jsxs)("div",{className:"memberInfoElement",children:[Object(p.jsx)("h3",{children:"Frozen: "})," ",F.member_frozen]}),Object(p.jsx)("button",{style:{display:I||y?"none":"block"},"data-testid":"edit",className:"buttons",onClick:function(){M(!0)},children:"edit"}),Object(p.jsx)("button",{"data-testid":"delete",id:"delete",style:{display:I||y?"none":"block"},className:"buttons",onClick:function(){return P.apply(this,arguments)},children:"delete"})]}),Object(p.jsx)("div",{className:"center",children:Object(p.jsx)(l.b,{style:{display:I||y?"none":"block"},className:"homeLink",to:"/",children:Object(p.jsx)("button",{className:"buttons home",children:"Home"})})}),Object(p.jsx)("div",{id:"memberInfoContainer",style:{display:!0===I?"flex":"none"},children:Object(p.jsxs)("form",{id:"memberUpdateForm",children:[Object(p.jsxs)("div",{className:"memberUpdateElement",children:["Name:",Object(p.jsx)("input",{onChange:U,name:"member_name",className:"memberInput","data-testid":"name"})]}),Object(p.jsxs)("div",{className:"memberUpdateElement",children:["Phone number:",Object(p.jsx)("input",{onChange:U,name:"member_phone",className:"memberInput","data-testid":"phone"})]}),Object(p.jsxs)("div",{className:"memberUpdateElement",children:["Belt:",Object(p.jsxs)("select",{onChange:U,name:"member_belt","data-testid":"beltInput",className:"memberInput",children:[Object(p.jsx)("option",{value:"white",children:"white"}),Object(p.jsx)("option",{value:"blue",children:"blue"}),Object(p.jsx)("option",{value:"purple",children:"purple"}),Object(p.jsx)("option",{value:"brown",children:"brown"}),Object(p.jsx)("option",{value:"black",children:"black"})]})]}),Object(p.jsxs)("div",{className:"memberUpdateElement",children:["Joined:",Object(p.jsx)("input",{name:"member_joined_at",className:"memberInput",type:"date","data-testid":"joined",onChange:U,defaultValue:f})]}),Object(p.jsxs)("div",{className:"memberUpdateElement",children:["Paid:",Object(p.jsxs)("select",{"data-testid":"paid",name:"member_paid",onChange:U,defaultValue:v,children:[Object(p.jsx)("option",{value:"no",selected:!0,children:"Select"}),Object(p.jsx)("option",{value:"yes",children:"Yes"}),Object(p.jsx)("option",{value:"no",children:"No"})]})]}),Object(p.jsxs)("div",{className:"memberUpdateElement",children:["Frozen:",Object(p.jsxs)("select",{"data-testid":"frozen",name:"member_frozen",onChange:U,defaultValue:_,children:[Object(p.jsx)("option",{value:"no",selected:!0,children:"Select"}),Object(p.jsx)("option",{value:"yes",children:"Yes"}),Object(p.jsx)("option",{value:"no",children:"No"})]})]}),Object(p.jsx)("input",{"data-testid":"submit",id:"updateSubmit",onClick:function(e){return D.apply(this,arguments)},type:"submit"}),Object(p.jsx)("button",{"data-testid":"cancel",type:"button",onClick:function(){M(!1)},children:"Cancel"})]})}),Object(p.jsx)("div",{id:"memberDeleted",children:Object(p.jsxs)("div",{id:"memberDeletedInner",style:{display:!1===y?"none":"flex"},children:[Object(p.jsx)("h2",{children:"Member deleted, navigate back to home"}),Object(p.jsx)(l.b,{className:"homeLink",to:"/",children:Object(p.jsx)("button",{className:"buttons home",children:"Home"})})]})})]})}n(19);var f=function(e){var t=e.member;return Object(p.jsxs)("button",{className:"memberButton",children:[Object(p.jsx)("h3",{children:t.member_name}),Object(p.jsx)("div",{style:{backgroundColor:void 0!==t?null===t.member_belt?"white":t.member_belt:"white"},"data-testid":"belt"})]})};function v(e){return Object(p.jsx)("div",{id:"membersContain",children:void 0!==e.members&&e.members.map((function(e){return Object(p.jsx)(l.b,{className:"memberLink",to:"member/"+e.member_id+"/"+e.member_name+"/"+e.member_belt+"/"+e.member_phone+"/"+e.member_joined_at+"/"+e.member_paid+"/"+e.member_frozen,children:Object(p.jsx)(f,{member:e},e.member_id)},e.member_id+"_link")}))})}function _(e){var t=e.setMemberSearch;return Object(p.jsx)("div",{children:Object(p.jsx)("input",{onChange:function(e){t(e.target.value),console.log(e.target.value)},placeholder:"Search Member","data-testid":"search",id:"memberSearch"})})}function N(e){var t=e.members,n=e.setMemberSearch;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{"data-testid":"header",children:"Mat Tracker"}),Object(p.jsxs)("div",{id:"elementContainer",children:[Object(p.jsx)(l.b,{id:"addMemberLink",to:"CreateMemberPage",children:Object(p.jsx)("button",{id:"addMember",children:"Add Member"})}),Object(p.jsx)(_,{setMemberSearch:n}),Object(p.jsx)(v,{members:t})]})]})}function g(e){var t=e.getMembersFunction,n=void 0===t?d:t,r=Object(a.useState)(),c=Object(b.a)(r,2),s=c[0],j=c[1],u=Object(a.useState)(!0),h=Object(b.a)(u,2),f=h[0],v=h[1],_=Object(a.useState)(""),g=Object(b.a)(_,2),y=g[0],k=g[1];return Object(a.useEffect)((function(){function e(){return(e=Object(i.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n({name:y});case 3:t=e.sent,j(t),v(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),v(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,y]),f?Object(p.jsx)("div",{children:"...loading"}):Object(p.jsx)(l.a,{children:Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{path:"/",element:Object(p.jsx)(N,{members:s,setMemberSearch:k})}),Object(p.jsx)(o.a,{path:"CreateMemberPage",element:Object(p.jsx)(O,{setMembers:j})}),Object(p.jsx)(o.a,{path:"member/:id/:name/:belt/:phone/:joined/:paid/:frozen",element:Object(p.jsx)(x,{setMembers:j,getMembersFunction:d})})]})})}var y=function(){return Object(p.jsx)(g,{})};c.a.render(Object(p.jsx)(y,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.85206adc.chunk.js.map