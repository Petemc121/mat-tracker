(this["webpackJsonpmat-tracker-client"]=this["webpackJsonpmat-tracker-client"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(12),c=n.n(a),s=n(3),i=n.n(s),m=n(5),o=n(4),b=n(7),l=n(2);function d(e){return u.apply(this,arguments)}function u(){return(u=Object(m.a)(i.a.mark((function e(t){var n,r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,e.next=3,fetch("/members");case 3:return r=e.sent,e.next=6,r.json();case 6:if(a=e.sent,""!==n){e.next=9;break}return e.abrupt("return",a);case 9:return c=a.filter((function(e){return null!==e.member_name&&e.member_name.toUpperCase().includes(n.toUpperCase())})),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return p.apply(this,arguments)}function p(){return(p=Object(m.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.memberInput,r=n,console.log("dao "+n),fetch("/members",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return O.apply(this,arguments)}function O(){return(O=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.id,fetch("/members/"+n,{method:"DELETE",headers:{"Content-type":"application/json"}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return f.apply(this,arguments)}function f(){return(f=Object(m.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.update,a=r,e.next=4,fetch("/members/"+n,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(a)});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=n(8),_=n(9),y=n(0);function g(e){var t=e.handleChange,n=e.handleSubmit,a=e.getMembersFunction,c=void 0===a?d:a,s=e.setMembers,l=new Date,u=l.getMonth()+1,p=l.getFullYear()+"-"+u+"-"+l.getDate(),h=Object(r.useState)({member_name:"",member_phone:"",member_belt:"white",member_joined_at:p,member_paid:"No",member_frozen:"No"}),O=Object(o.a)(h,2),x=O[0],f=O[1],g=Object(r.useState)(!1),N=Object(o.a)(g,2),k=N[0],w=N[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({memberInput:x});case 2:return console.log(x),e.next=5,c({name:""});case 5:t=e.sent,console.log(t),s(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!0===k?(console.log("memberAdded)"),e()):console.log("memberNotAdded)")}),[k,c,s,x]),void 0===n&&(n=function(e){if(e.preventDefault(),""!==x.member_name)if(""!==x.member_phone)if(isNaN(parseInt(x.member_phone)))alert("please only enter numbers in phone field");else if(x.member_phone.length<10||x.member_phone.length>11)alert("Your phone number is not valid");else try{w(!0),console.log("adding"),console.log(k)}catch(t){console.log(t),console.log("memberAdded)")}else alert("please enter your phone number");else alert("please enter your name")}),void 0===t&&(t=function(e){var t=e.target.name,n=e.target.value;f((function(e){return Object(_.a)(Object(_.a)({},e),{},Object(v.a)({},t,n))}))}),Object(y.jsxs)("div",{id:"memberInputFormContainer",children:[Object(y.jsxs)("form",{id:"memberInputForm",style:{display:k?"none":"flex"},children:[Object(y.jsxs)("div",{className:"memberInputElement",children:["Name:",Object(y.jsx)("input",{onChange:t,name:"member_name",className:"memberInput","data-testid":"name"})]}),Object(y.jsxs)("div",{className:"memberInputElement",children:["Phone number:",Object(y.jsx)("input",{onChange:t,name:"member_phone",className:"memberInput","data-testid":"phone"})]}),Object(y.jsxs)("div",{className:"memberInputElement",children:["Belt:",Object(y.jsxs)("select",{onChange:t,name:"member_belt","data-testid":"beltInput",className:"memberInput",children:[Object(y.jsx)("option",{value:"white",children:"white"}),Object(y.jsx)("option",{value:"blue",children:"blue"}),Object(y.jsx)("option",{value:"purple",children:"purple"}),Object(y.jsx)("option",{value:"brown",children:"brown"}),Object(y.jsx)("option",{value:"black",children:"black"})]})]}),Object(y.jsxs)("div",{className:"memberInputElement",children:["Joined:",Object(y.jsx)("input",{name:"member_joined_at",className:"memberInput",type:"date","data-testid":"joined",onChange:t,defaultValue:p})]}),Object(y.jsx)("input",{"data-testid":"submit",onClick:n,type:"submit"})]}),Object(y.jsx)(b.b,{id:"createMemberCancel",className:"homeLink",to:"/",children:Object(y.jsx)("button",{"data-testid":"cancel",className:"cancel",children:"Cancel"})}),Object(y.jsxs)("div",{id:"memberAddedNotification",style:{display:k?"flex":"none"},children:[Object(y.jsx)("h3",{id:"memberAddedMessage",children:"Member added! Navigate back to home."}),Object(y.jsx)(b.b,{className:"homeLink",to:"/",children:Object(y.jsx)("button",{className:"buttons cancel home",children:"Home"})})]})]})}function N(e){var t=e.setMembers,n=e.getMembersFunction,a=void 0===n?d:n,c=Object(l.g)(),s=c.id,u=c.name,j=c.phone,p=c.belt,O=c.joined,f=c.paid,g=c.frozen,N=Object(r.useState)(!1),k=Object(o.a)(N,2),w=k[0],C=k[1],I=Object(r.useState)(!1),E=Object(o.a)(I,2),M=E[0],S=E[1],z=Object(r.useState)(!1),F=Object(o.a)(z,2),P=F[0],U=F[1],A=Object(r.useState)({member_name:u,member_phone:j,member_belt:p,member_joined_at:O,member_paid:f,member_frozen:g}),D=Object(o.a)(A,2),J=D[0],L=D[1];function B(){return(B=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0===window.confirm("Are you sure you want to delete this member?")&&C(!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t=e.target.name,n=e.target.value;L((function(e){return Object(_.a)(Object(_.a)({},e),{},Object(v.a)({},t,n))}))}function Y(){return(Y=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),U(!0),S(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=function(){var e=Object(m.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h({id:s});case 3:return e.next=5,a({name:""});case 5:return n=e.sent,t(n),C(!0),e.next=10,a({name:""});case 10:r=e.sent,console.log(r),t(r),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(m.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=J,e.prev=1,x({id:s,update:J}),e.next=5,a({name:""});case 5:r=e.sent,t(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:L(n);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();!0===P&&n(),!0===w&&e()}),[w,a,s,t,P,J]),Object(y.jsxs)("div",{id:"memberPage",children:[Object(y.jsxs)("div",{id:"memberInfoContainer",style:{display:!1===w&&!1===M?"flex":"none"},children:[Object(y.jsxs)("div",{className:"memberInfoElement",children:[Object(y.jsx)("h3",{children:"Name:"})," ",J.member_name]}),Object(y.jsxs)("div",{className:"memberInfoElement",children:[Object(y.jsx)("h3",{children:"Phone number:"})," ",J.member_phone]}),Object(y.jsxs)("div",{className:"memberInfoElement",children:[Object(y.jsx)("h3",{children:"Belt:"})," ",J.member_belt]}),Object(y.jsxs)("div",{className:"memberInfoElement",children:[Object(y.jsx)("h3",{children:"Joined at:"})," ",J.member_joined_at]}),Object(y.jsxs)("div",{className:"memberInfoElement",children:[Object(y.jsx)("h3",{children:"Paid:"})," ",J.member_paid]}),Object(y.jsxs)("div",{className:"memberInfoElement",children:[Object(y.jsx)("h3",{children:"Frozen: "})," ",J.member_frozen]}),Object(y.jsx)("button",{style:{display:M||w?"none":"block"},"data-testid":"edit",className:"buttons",onClick:function(){S(!0)},children:"edit"}),Object(y.jsx)("button",{"data-testid":"delete",id:"delete",style:{display:M||w?"none":"block"},className:"buttons",onClick:function(){return B.apply(this,arguments)},children:"delete"})]}),Object(y.jsx)("div",{className:"center",children:Object(y.jsx)(b.b,{style:{display:M||w?"none":"block"},className:"homeLink",to:"/",children:Object(y.jsx)("button",{className:"buttons home",children:"Home"})})}),Object(y.jsx)("div",{id:"memberInfoContainer",style:{display:!0===M?"flex":"none"},children:Object(y.jsxs)("form",{id:"memberUpdateForm",children:[Object(y.jsxs)("div",{className:"memberUpdateElement",children:["Name:",Object(y.jsx)("input",{onChange:T,name:"member_name",className:"memberInput","data-testid":"name",value:J.member_name})]}),Object(y.jsxs)("div",{className:"memberUpdateElement",children:["Phone number:",Object(y.jsx)("input",{onChange:T,name:"member_phone",className:"memberInput","data-testid":"phone",value:J.member_phone})]}),Object(y.jsxs)("div",{className:"memberUpdateElement",children:["Belt:",Object(y.jsxs)("select",{onChange:T,name:"member_belt","data-testid":"beltInput",className:"memberInput",value:J.member_belt,children:[Object(y.jsx)("option",{value:"white",children:"white"}),Object(y.jsx)("option",{value:"blue",children:"blue"}),Object(y.jsx)("option",{value:"purple",children:"purple"}),Object(y.jsx)("option",{value:"brown",children:"brown"}),Object(y.jsx)("option",{value:"black",children:"black"})]})]}),Object(y.jsxs)("div",{className:"memberUpdateElement",children:["Joined:",Object(y.jsx)("input",{name:"member_joined_at",className:"memberInput",type:"date","data-testid":"joined",onChange:T,value:J.member_joined_at})]}),Object(y.jsxs)("div",{className:"memberUpdateElement",children:["Paid:",Object(y.jsxs)("select",{"data-testid":"paid",name:"member_paid",onChange:T,defaultValue:J.member_paid,children:[Object(y.jsx)("option",{value:"no",selected:!0,children:"Select"}),Object(y.jsx)("option",{value:"yes",children:"Yes"}),Object(y.jsx)("option",{value:"no",children:"No"})]})]}),Object(y.jsxs)("div",{className:"memberUpdateElement",children:["Frozen:",Object(y.jsxs)("select",{"data-testid":"frozen",name:"member_frozen",onChange:T,defaultValue:J.member_frozen,children:[Object(y.jsx)("option",{value:"no",selected:!0,children:"Select"}),Object(y.jsx)("option",{value:"yes",children:"Yes"}),Object(y.jsx)("option",{value:"no",children:"No"})]})]}),Object(y.jsx)("input",{"data-testid":"submit",id:"updateSubmit",onClick:function(e){return Y.apply(this,arguments)},type:"submit"}),Object(y.jsx)("button",{"data-testid":"cancel",type:"button",onClick:function(){S(!1)},children:"Cancel"})]})}),Object(y.jsx)("div",{style:{display:!1===w?"none":"block"},id:"memberDeleted",children:Object(y.jsxs)("div",{id:"memberDeletedInner",style:{display:!1===w?"none":"flex"},children:[Object(y.jsx)("h2",{children:"Member deleted, navigate back to home"}),Object(y.jsx)(b.b,{className:"homeLink",to:"/",children:Object(y.jsx)("button",{className:"buttons home",children:"Home"})})]})})]})}n(19);var k=function(e){var t=e.member,n=Object(r.useState)(!1),a=Object(o.a)(n,2),c=a[0],s=a[1];return Object(r.useEffect)((function(){s(!0),c&&console.log("true")}),[s,c]),Object(y.jsxs)("button",{style:{opacity:c?"1":"0"},className:"memberButton",children:[Object(y.jsx)("h3",{children:t.member_name}),Object(y.jsx)("div",{style:{backgroundColor:void 0!==t?null===t.member_belt?"white":t.member_belt:"white"},"data-testid":"belt"})]})};function w(e){return Object(y.jsx)("div",{id:"membersContain",children:void 0!==e.members&&e.members.map((function(e){return Object(y.jsx)(b.b,{className:"memberLink",to:"member/"+e.member_id+"/"+e.member_name+"/"+e.member_belt+"/"+e.member_phone+"/"+e.member_joined_at+"/"+e.member_paid+"/"+e.member_frozen,children:Object(y.jsx)(k,{member:e},e.member_id)},e.member_id+"_link")}))})}function C(e){var t=e.setMemberSearch;return Object(y.jsx)("div",{children:Object(y.jsx)("input",{onChange:function(e){t(e.target.value),console.log(e.target.value)},placeholder:"Search Member","data-testid":"search",id:"memberSearch"})})}function I(e){var t=e.members,n=e.setMemberSearch;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{"data-testid":"header",children:"Mat Tracker"}),Object(y.jsxs)("div",{id:"elementContainer",children:[Object(y.jsx)(b.b,{id:"addMemberLink",to:"CreateMemberPage",children:Object(y.jsx)("button",{id:"addMember",children:"Add Member"})}),Object(y.jsx)(C,{setMemberSearch:n}),Object(y.jsx)(w,{members:t})]})]})}function E(e){var t=e.getMembersFunction,n=void 0===t?d:t,a=Object(r.useState)(),c=Object(o.a)(a,2),s=c[0],u=c[1],j=Object(r.useState)(!0),p=Object(o.a)(j,2),h=p[0],O=p[1],x=Object(r.useState)(""),f=Object(o.a)(x,2),v=f[0],_=f[1];return Object(r.useEffect)((function(){function e(){return(e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n({name:v});case 3:t=e.sent,console.log(t),u(t),O(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),O(!0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,v]),h?Object(y.jsx)("div",{children:"...loading"}):Object(y.jsx)(b.a,{children:Object(y.jsxs)(l.c,{children:[Object(y.jsx)(l.a,{path:"/",element:Object(y.jsx)(I,{members:s,setMemberSearch:_})}),Object(y.jsx)(l.a,{path:"CreateMemberPage",element:Object(y.jsx)(g,{setMembers:u})}),Object(y.jsx)(l.a,{path:"member/:id/:name/:belt/:phone/:joined/:paid/:frozen",element:Object(y.jsx)(N,{setMembers:u,getMembersFunction:d})})]})})}var M=function(){return Object(y.jsx)(E,{})};c.a.render(Object(y.jsx)(M,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.e1c907fd.chunk.js.map