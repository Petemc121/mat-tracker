{"ast":null,"code":"import _regeneratorRuntime from\"/home/peter/Documents/mat-tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/peter/Documents/mat-tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/peter/Documents/mat-tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{useParams}from\"react-router-dom\";import{Link}from\"react-router-dom\";import{getMembers}from\"../MatTrackerDAO/MatTrackerData\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MemberPage(_ref){var setMembers=_ref.setMembers,_ref$getMembersFuncti=_ref.getMembersFunction,getMembersFunction=_ref$getMembersFuncti===void 0?getMembers:_ref$getMembersFuncti;var _useParams=useParams(),id=_useParams.id,name=_useParams.name,phone=_useParams.phone,belt=_useParams.belt,joined=_useParams.joined;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),deleted=_useState2[0],setDeleted=_useState2[1];function onDelete(){return _onDelete.apply(this,arguments);}function _onDelete(){_onDelete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,response2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/members/\"+id,{method:\"DELETE\",headers:{\"Content-type\":\"application/json\"}});case 3:response=_context.sent;_context.next=6;return getMembersFunction({name:\"\"});case 6:response2=_context.sent;setMembers(response2);setDeleted(true);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return _onDelete.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"memberPage\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"memberInfoContainer\",style:{display:deleted===false?\"flex\":\"none\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"memberInfoElement\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Name:\"}),\" \",name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"memberInfoElement\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Phone number:\"}),\" \",phone]}),/*#__PURE__*/_jsxs(\"div\",{className:\"memberInfoElement\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Belt:\"}),\" \",belt]}),/*#__PURE__*/_jsxs(\"div\",{className:\"memberInfoElement\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Joined at:\"}),\" \",joined]}),/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"delete\",onClick:onDelete,children:\"delete\"}),/*#__PURE__*/_jsx(Link,{className:\"homeLink\",to:\"/\",children:\"Home\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"memberDeleted\",style:{display:deleted===false?\"none\":\"flex\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Member deleted, navigate back to home\"}),/*#__PURE__*/_jsx(Link,{className:\"homeLink\",to:\"/\",children:\"Home\"})]})]});}","map":{"version":3,"sources":["/home/peter/Documents/mat-tracker/client/src/pages/MemberPage.tsx"],"names":["useState","useParams","Link","getMembers","MemberPage","setMembers","getMembersFunction","id","name","phone","belt","joined","deleted","setDeleted","onDelete","fetch","method","headers","response","response2","console","log","display"],"mappings":"0dAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,IAAT,KAAqB,kBAArB,CAKA,OAASC,UAAT,KAA2B,iCAA3B,C,wFASA,cAAe,SAASC,CAAAA,UAAT,MAGK,IAFlBC,CAAAA,UAEkB,MAFlBA,UAEkB,4BADlBC,kBACkB,CADlBA,kBACkB,gCADGH,UACH,uBAClB,eAA0CF,SAAS,EAAnD,CAAQM,EAAR,YAAQA,EAAR,CAAYC,IAAZ,YAAYA,IAAZ,CAAkBC,KAAlB,YAAkBA,KAAlB,CAAyBC,IAAzB,YAAyBA,IAAzB,CAA+BC,MAA/B,YAA+BA,MAA/B,CACA,cAA8BX,QAAQ,CAAC,KAAD,CAAtC,wCAAOY,OAAP,eAAgBC,UAAhB,eAFkB,QAIHC,CAAAA,QAJG,kIAIlB,gMAE2BC,CAAAA,KAAK,CAAC,YAAcR,EAAf,CAAmB,CAC7CS,MAAM,CAAE,QADqC,CAE7CC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAFoC,CAAnB,CAFhC,QAEUC,QAFV,qCAO4BZ,CAAAA,kBAAkB,CAAC,CAAEE,IAAI,CAAE,EAAR,CAAD,CAP9C,QAOUW,SAPV,eAQId,UAAU,CAACc,SAAD,CAAV,CACAN,UAAU,CAAC,IAAD,CAAV,CATJ,iFAWIO,OAAO,CAACC,GAAR,cAXJ,qEAJkB,2CAmBlB,mBACE,aAAK,EAAE,CAAC,YAAR,wBACE,aACE,EAAE,CAAC,qBADL,CAEE,KAAK,CAAE,CAAEC,OAAO,CAAEV,OAAO,GAAK,KAAZ,CAAoB,MAApB,CAA6B,MAAxC,CAFT,wBAIE,aAAK,SAAS,CAAC,mBAAf,wBACE,6BADF,KACkBJ,IADlB,GAJF,cAOE,aAAK,SAAS,CAAC,mBAAf,wBACE,qCADF,KAC0BC,KAD1B,GAPF,cAUE,aAAK,SAAS,CAAC,mBAAf,wBACE,6BADF,KACkBC,IADlB,GAVF,cAaE,aAAK,SAAS,CAAC,mBAAf,wBACE,kCADF,KACuBC,MADvB,GAbF,cAgBE,eAAQ,cAAY,QAApB,CAA6B,OAAO,CAAEG,QAAtC,oBAhBF,cAmBE,KAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,CAA2B,EAAE,CAAC,GAA9B,kBAnBF,GADF,cAwBE,aACE,EAAE,CAAC,eADL,CAEE,KAAK,CAAE,CAAEQ,OAAO,CAAEV,OAAO,GAAK,KAAZ,CAAoB,MAApB,CAA6B,MAAxC,CAFT,wBAIE,6DAJF,cAKE,KAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,CAA2B,EAAE,CAAC,GAA9B,kBALF,GAxBF,GADF,CAoCD","sourcesContent":["import { useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport {\n  getMembersInput,\n  getMembersResponse,\n} from \"../MatTrackerDAO/MatTrackerDataTypes\";\nimport { getMembers } from \"../MatTrackerDAO/MatTrackerData\";\n\ninterface MemberPageInput {\n  getMembersFunction?: ({\n    name,\n  }: getMembersInput) => Promise<getMembersResponse[]>;\n  setMembers?: any;\n}\n\nexport default function MemberPage({\n  setMembers,\n  getMembersFunction = getMembers,\n}: MemberPageInput) {\n  const { id, name, phone, belt, joined } = useParams();\n  const [deleted, setDeleted] = useState(false);\n\n  async function onDelete() {\n    try {\n      const response = await fetch(\"/members/\" + id, {\n        method: \"DELETE\",\n        headers: { \"Content-type\": \"application/json\" },\n      });\n\n      const response2 = await getMembersFunction({ name: \"\" });\n      setMembers(response2);\n      setDeleted(true);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  return (\n    <div id=\"memberPage\">\n      <div\n        id=\"memberInfoContainer\"\n        style={{ display: deleted === false ? \"flex\" : \"none\" }}\n      >\n        <div className=\"memberInfoElement\">\n          <h3>Name:</h3> {name}\n        </div>\n        <div className=\"memberInfoElement\">\n          <h3>Phone number:</h3> {phone}\n        </div>\n        <div className=\"memberInfoElement\">\n          <h3>Belt:</h3> {belt}\n        </div>\n        <div className=\"memberInfoElement\">\n          <h3>Joined at:</h3> {joined}\n        </div>\n        <button data-testid=\"delete\" onClick={onDelete}>\n          delete\n        </button>\n        <Link className=\"homeLink\" to=\"/\">\n          Home\n        </Link>\n      </div>\n      <div\n        id=\"memberDeleted\"\n        style={{ display: deleted === false ? \"none\" : \"flex\" }}\n      >\n        <h2>Member deleted, navigate back to home</h2>\n        <Link className=\"homeLink\" to=\"/\">\n          Home\n        </Link>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}